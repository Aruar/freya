//--------------------------------------------------------------
//               (c)2004-2007 Aurora Team Presents:             
//                  ___                                         
//                 /   |_   _ _ __ ___  _ __ __ _               
//                / /| | | | | '__/ _ \| '__/ _` |              
//               / ___ | |_| | | | (_) | | | (_| |              
//              /_/  |_|\____|_|  \___/|_|  \__,_|              
//                 http://aurora.deltaanime.net                 
//--------------------------------------------------------------
// Script Title: RO Episode 11.3 Nameless Island Script Addition	Author: Various People
//--------------------------------------------------------------
// Revision History: v1.0
//--------------------------------------------------------------
//	1.0 First version, based on kRO Sakray 11.3 [Tsuyuki]
//--------------------------------------------------------------
// Additional Notes: * Highly Unofficial *
//--------------------------------------------------------------


//--------------------------------------------------------------
// Episode 11.3 Quests (Incomplete)
//--------------------------------------------------------------
// - Nameless Island Admission Quest [*]
// - Peace Teaching of Arunafeltz Republic Quest [*]
// - Z Group Quest [*]
// - Investigation Cooperation Quest [*]
// - Loan Book of Mirv Quest [*]
// - Diamond of Ruin Quest [*]
// - Emerald of Misfortune Quest [*]
//--------------------------------------------------------------


//--------------------------------------------------------------
// Nameless Island Town Warp Portals - [jAthena]
//--------------------------------------------------------------

nameless_i.gat,168,257,0	warp	namelesswarp01	1,1,nameless_in.gat,12,43
nameless_in.gat,12,40,0		warp	namelesswarp02	1,1,nameless_i.gat,168,254
nameless_i.gat,252,130,0	warp	namelesswarp03	1,1,nameless_in.gat,26,128
nameless_in.gat,23,128,0	warp	namelesswarp04	1,1,nameless_i.gat,249,130
nameless_i.gat,79,256,0		warp	namelesswarp05	1,1,nameless_in.gat,12,172
nameless_in.gat,12,169,0	warp	namelesswarp06	1,1,nameless_i.gat,82,256
nameless_i.gat,78,94,0		warp	namelesswarp07	1,1,nameless_in.gat,96,180
nameless_in.gat,96,177,0	warp	namelesswarp08	1,1,nameless_i.gat,81,96


//--------------------------------------------------------------
// Abbey Dungeon Warp Portals - [jAthena]
//--------------------------------------------------------------

nameless_n.gat,156,184,0	warp	abbeywarp01	1,1,abbey01.gat,51,12
nameless_i.gat,156,184,0	warp	abbeywarp02	1,1,abbey01.gat,51,12
abbey01.gat,51,9,0	warp	abbeywarp03	1,1,nameless_n.gat,159,184
abbey01.gat,88,122,0	warp	abbeywarp04	1,1,abbey01.gat,16,195
abbey01.gat,12,195,0	warp	abbeywarp05	1,1,abbey01.gat,88,118
abbey01.gat,322,100,0	warp	abbeywarp06	1,1,abbey02.gat,150,13
abbey02.gat,150,8,0	warp	abbeywarp07	1,1,abbey01.gat,322,96
abbey02.gat,150,290,0	warp	abbeywarp08	1,1,abbey03.gat,120,10
abbey03.gat,120,6,0	warp	abbeywarp09	1,1,abbey02.gat,150,285


//--------------------------------------------------------------
// Nameless Island Nightmare Monster Spawns - [Playtester]
//--------------------------------------------------------------

nameless_n.gat,0,0,0,0	monster	Ragged Zombie	1865,30,0,0,0
nameless_n.gat,0,0,0,0	monster	Hell Poodle	1866,30,0,0,0
nameless_n.gat,0,0,0,0	monster	Ghoul	1036,20,0,0,0
nameless_n.gat,0,0,0,0	monster	Zombie Slaughter	1864,20,0,0,0
nameless_n.gat,0,0,0,0	monster	Flame Skull	1869,20,0,0,0
nameless_n.gat,0,0,0,0	monster	Banshee	1867,10,0,0,0

// nameless_n.gat,0,0,0,0	monster	Wild Rose	1261,1,7200000,3600000,0


//--------------------------------------------------------------
// Nameless Island Town Monster Spawns - [Playtester]
//--------------------------------------------------------------

nameless_i.gat,0,0,0,0	monster	Wild Rose	1261,1,7200000,3600000,0


//--------------------------------------------------------------
// Abbey Dungeon Monster Spawns - [Playtester]
//--------------------------------------------------------------

abbey01.gat,0,0,0,0	monster	Banshee	1867,30,0,0,0
abbey01.gat,0,0,0,0	monster	Ghoul	1036,20,0,0,0
abbey01.gat,0,0,0,0	monster	Zombie Slaughter	1864,20,0,0,0
abbey01.gat,0,0,0,0	monster	Ragged Zombie	1865,20,0,0,0
abbey01.gat,0,0,0,0	monster	Hell Poodle	1866,20,0,0,0
abbey01.gat,0,0,0,0	monster	Flame Skull	1869,20,0,0,0

abbey02.gat,0,0,0,0	monster	Zombie Slaughter	1864,60,0,0,0
abbey02.gat,0,0,0,0	monster	Ragged Zombie	1865,30,0,0,0
abbey02.gat,0,0,0,0	monster	Flame Skull	1869,20,0,0,0
abbey02.gat,0,0,0,0	monster	Necromancer	1870,10,0,0,0
abbey02.gat,0,0,0,0	monster	Falling Bishop	1871,1,7200000,3600000,1

abbey03.gat,0,0,0,0	monster	Necromancer	1870,30,0,0,0
abbey03.gat,0,0,0,0	monster	Banshee	1867,20,0,0,0
abbey03.gat,0,0,0,0	monster	Flame Skull	1869,20,0,0,0
abbey03.gat,0,0,0,0	monster	Beelzebub	1873,1,43200000,19800000,1


//--------------------------------------------------------------
// Nameless Island Access Sailor (Custom) - [Tsuyuki]
//--------------------------------------------------------------

ve_fild07.gat,127,133,3	script	Sailor#veins	934,{

	mes "[Sailor]";
	mes "Hello there!";
	mes "Would you like to";
	mes "board my ship and";
	mes "travel to the";
	mes "Nameless Island?";
	next;
	mes "[Sailor]";
	mes "I must warn you however,";
	mes "Nameless Island is very";
	mes "dangerous.";
	next;
	mes "[Sailor]";
	mes "Only high level players";
	mes "are permitted to";
	mes "venture there.";
	next;
	switch(select("Nameless Island -> 500z.","Cancel.")) {
	case 1:
		if (BaseLevel < 80) {
			mes "[Sailor]";
			mes "I'm sorry, but you must";
			mes "be at least base level";
			mes "80 to go to Nameless";
			mes "Island.";
			close;
		}
		if (Zeny < 500) {
			mes "[Sailor]";
			mes "I'm sorry, but you don't";
			mes "have enough zeny. Please";
			mes "come back with 500z and";
			mes "you can board the ship.";
			close;
		}
		set Zeny,Zeny-500;
		if ((gettime(3) < 6) || (gettime(3) > 18)) {
			warp "nameless_n.gat",257,215;
		} else {
			warp "nameless_i.gat",257,215;
		}
		end;
	case 2:
		mes "[Sailor]";
		mes "Alright then.";
		mes "Come back if you";
		mes "change your mind.";
		close;
	}
}

nameless_i.gat,255,217,6	script	Sailor#nameless	934,{

	mes "[Sailor]";
	mes "Would you like to";
	mes "go back to the";
	mes "mainland?";
	next;
	switch(select("Sail back.","Cancel.")) {
	case 1:
		warp "ve_fild07.gat",129,131;
		end;
	case 2:
		mes "[Sailor]";
		mes "Alright then.";
		mes "Come back if you";
		mes "change your mind.";
		close;
	}
}

nameless_n.gat,255,217,6	duplicate(Sailor#nameless)	Sailor#nightmare	934


//--------------------------------------------------------------
// Nameless Island / Nightmare Switchers (Custom) - [Tsuyuki]
//--------------------------------------------------------------

nameless_i.gat,184,212,0	script	NamelessManager	139,1,1,{

OnInit:
	set 'nmwarpfix,0;
	if ((gettime(3) < 6) || (gettime(3) > 18)) {
		set 'nmtimecheck,1;
	} else if ((gettime(3) > 6) || (gettime(3) < 18)) {
		set 'nmtimecheck,0;
	}
	initnpctimer;
	end;

OnTimer1800000:
	if (((gettime(3) < 6) || (gettime(3) > 18)) && ('nmtimecheck == 0)) {
		mapannounce "nameless_i.gat","Night has fallen..",8;
		set 'nmtimecheck,1;
		sleep 10000;
		set 'nmwarpfix,1;
		areawarp "nameless_i.gat",0,0,300,300,"nameless_n.gat",184,212;
		sleep 3000;
	} else if (((gettime(3) > 6) || (gettime(3) < 18)) && ('nmtimecheck == 1)) {
		mapannounce "nameless_n.gat","Day has risen..",8;
		set 'nmtimecheck,0;
		sleep 10000;
		set 'nmwarpfix,1;
		areawarp "nameless_n.gat",0,0,300,300,"nameless_i.gat",184,212;
		sleep 3000;
	}
	set 'nmwarpfix,0;
	initnpctimer;
	end;

OnTouch:
	if ('nmwarpfix == 1) {
		warp "Random",0,0;
		end;
	} else {
		end;
	}
}

nameless_in.gat,1,1,0	script	NamelessManager2	139,{

OnInit:
	if ((gettime(3) < 6) || (gettime(3) > 18)) {
		set 'nmtimecheck,1;
	} else if ((gettime(3) > 6) || (gettime(3) < 18)) {
		set 'nmtimecheck,0;
	}
	initnpctimer;
	end;

OnTimer1800000:
	if (((gettime(3) < 6) || (gettime(3) > 18)) && ('nmtimecheck == 0)) {
		mapannounce "nameless_in.gat","Night has fallen..",8;
		set 'nmtimecheck,1;
		sleep 10000;
		set 'nmwarpfix,1;
		areawarp "nameless_in.gat",0,0,300,300,"nameless_n.gat",184,212;
		sleep 3000;
	} else if (((gettime(3) > 6) || (gettime(3) < 18)) && ('nmtimecheck == 1)) {
		set 'nmtimecheck,0;
	}
	initnpctimer;
	end;
}

nameless_n.gat,184,212,0	script	NamelessManager3	139,1,1,{

OnTouch:
	if ((getvariableofnpc('nmwarpfix,"NamelessManager") == 1) && (getvariableofnpc('nmtimecheck,"NamelessManager") == 1)) {
		warp "Random",0,0;
		end;
	} else if ((getvariableofnpc('nmwarpfix,"NamelessManager") == 1) && (getvariableofnpc('nmtimecheck,"NamelessManager") == 0)) {
		warp "Random",0,0;
		end;
	} else {
		end;
	}
}
